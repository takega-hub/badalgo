# üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö ML –º–æ–¥–µ–ª–µ–π

–ú–æ–¥—É–ª—å `retrain_all_models.py` –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è –≤—Å–µ—Ö ML –º–æ–¥–µ–ª–µ–π –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `ml_models` —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (min_risk_reward_ratio=2.0).

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü–µ—Ä–µ–æ–±—É—á–∏—Ç—å –≤—Å–µ –º–æ–¥–µ–ª–∏:
```bash
python retrain_all_models.py
```

### –ü–µ—Ä–µ–æ–±—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞:
```bash
python retrain_all_models.py --symbol BTCUSDT
```

### –ü–µ—Ä–µ–æ–±—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —Ç–∏–ø –º–æ–¥–µ–ª–µ–π:
```bash
python retrain_all_models.py --type quad_ensemble
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö:
```bash
python retrain_all_models.py --days 180
```

### –ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã –±–µ–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (dry-run):
```bash
python retrain_all_models.py --dry-run
```

### –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –º–æ–¥–µ–ª–∏, –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–Ω—ã–µ —Å–µ–≥–æ–¥–Ω—è:
```bash
python retrain_all_models.py --skip-existing
```

## üìã –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã –º–æ–¥–µ–ª–µ–π

- `rf` - Random Forest
- `xgb` - XGBoost
- `ensemble` - Ensemble (RF + XGBoost)
- `triple_ensemble` - TripleEnsemble (RF + XGBoost + LightGBM)
- `quad_ensemble` - QuadEnsemble (RF + XGBoost + LightGBM + LSTM)
- `lstm` - LSTM

## üîß –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|----------|--------------|
| `--symbol` | –§–∏–ª—å—Ç—Ä –ø–æ —Å–∏–º–≤–æ–ª—É (BTCUSDT, ETHUSDT, SOLUSDT) | –í—Å–µ —Å–∏–º–≤–æ–ª—ã |
| `--type` | –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É –º–æ–¥–µ–ª–∏ | –í—Å–µ —Ç–∏–ø—ã |
| `--days` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö | 180 |
| `--dry-run` | –ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã –±–µ–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è | False |
| `--skip-existing` | –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –º–æ–¥–µ–ª–∏, –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–Ω—ã–µ —Å–µ–≥–æ–¥–Ω—è | False |
| `--models-dir` | –ü—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å –º–æ–¥–µ–ª—è–º–∏ | ml_models |

## üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ü–µ—Ä–µ–æ–±—É—á–∏—Ç—å –≤—Å–µ QuadEnsemble –º–æ–¥–µ–ª–∏:
```bash
python retrain_all_models.py --type quad_ensemble
```

### 2. –ü–µ—Ä–µ–æ–±—É—á–∏—Ç—å –≤—Å–µ –º–æ–¥–µ–ª–∏ –¥–ª—è BTCUSDT –∏ ETHUSDT:
```bash
python retrain_all_models.py --symbol BTCUSDT
python retrain_all_models.py --symbol ETHUSDT
```

### 3. –ü–µ—Ä–µ–æ–±—É—á–∏—Ç—å –≤—Å–µ –º–æ–¥–µ–ª–∏ —Å 90 –¥–Ω—è–º–∏ –¥–∞–Ω–Ω—ã—Ö:
```bash
python retrain_all_models.py --days 90
```

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫–∏–µ –º–æ–¥–µ–ª–∏ –±—É–¥—É—Ç –ø–µ—Ä–µ–æ–±—É—á–µ–Ω—ã (dry-run):
```bash
python retrain_all_models.py --dry-run
```

## ‚öôÔ∏è –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π**: –ú–æ–¥—É–ª—å —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `ml_models` –∏ –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ `.pkl` —Ñ–∞–π–ª—ã
2. **–ü–∞—Ä—Å–∏–Ω–≥ –∏–º–µ–Ω**: –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–∏–ø –º–æ–¥–µ–ª–∏, —Å–∏–º–≤–æ–ª –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª –∏–∑ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
3. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –ü—Ä–∏–º–µ–Ω—è–µ—Ç —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ —Å–∏–º–≤–æ–ª—É –∏ —Ç–∏–ø—É (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω—ã)
4. **–ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ**: –î–ª—è –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Å–∫—Ä–∏–ø—Ç –æ–±—É—á–µ–Ω–∏—è:
   - `rf`, `xgb`, `ensemble`, `triple_ensemble` ‚Üí `retrain_ml_optimized.py`
   - `quad_ensemble` ‚Üí `train_quad_ensemble.py`
   - `lstm` ‚Üí `train_lstm_model.py`
5. **–û—Ç—á–µ—Ç**: –í—ã–≤–æ–¥–∏—Ç –∏—Ç–æ–≥–æ–≤—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —É—Å–ø–µ—à–Ω—ã–º –∏ –Ω–µ—É–¥–∞—á–Ω—ã–º –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è–º

## üìù –§–æ—Ä–º–∞—Ç –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞ –º–æ–¥–µ–ª–∏

–ú–æ–¥—É–ª—å –æ–∂–∏–¥–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π —Ñ–æ—Ä–º–∞—Ç –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞:
- `{model_type}_{SYMBOL}_{INTERVAL}.pkl`
- –ü—Ä–∏–º–µ—Ä—ã:
  - `quad_ensemble_BTCUSDT_15.pkl`
  - `rf_ETHUSDT_15.pkl`
  - `triple_ensemble_SOLUSDT_15.pkl`

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: –ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 30-60 –º–∏–Ω—É—Ç (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –º–æ–¥–µ–ª–µ–π –∏ –¥–Ω–µ–π –¥–∞–Ω–Ω—ã—Ö)

2. **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**: –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–¥–µ–ª–∞—Ç—å backup –ø–µ—Ä–µ–¥ –º–∞—Å—Å–æ–≤—ã–º –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ–º:
   ```bash
   cp -r ml_models ml_models_backup_$(date +%Y%m%d_%H%M%S)
   ```

3. **–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞**: –ü–µ—Ä–µ–¥ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞:
   ```bash
   sudo systemctl stop crypto-bot
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤**: –ü–æ—Å–ª–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∏ –º–µ—Ç—Ä–∏–∫–∏ –º–æ–¥–µ–ª–µ–π –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

## üîç –û—Ç–ª–∞–¥–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ–∂–∏–¥–∞–µ–º–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ –æ–±—É—á–µ–Ω–∏—è**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –æ–±—É—á–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—Ç
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ dry-run**: –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–º–∞–Ω–¥—ã —Å `--dry-run`
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**: –°–º–æ—Ç—Ä–∏—Ç–µ –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª–∏ –¥–ª—è –¥–µ—Ç–∞–ª–µ–π –æ—à–∏–±–æ–∫

## üìà –ü–æ—Å–ª–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–µ—Ç—Ä–∏–∫–∏ –º–æ–¥–µ–ª–µ–π –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±—ç–∫—Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –º–æ–¥–µ–ª–µ–π
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
   ```bash
   sudo systemctl start crypto-bot
   ```
4. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã –Ω–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π
