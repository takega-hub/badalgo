# üìä –ê–ù–ê–õ–ò–ó –°–¢–†–ê–¢–ï–ì–ò–ò V17 OPTIMIZED

## üéØ –û–ë–ó–û–† –°–¢–†–ê–¢–ï–ì–ò–ò

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
1. **train_v17_optimized.py** - –°–∫—Ä–∏–ø—Ç –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏ PPO
2. **crypto_env_v17_optimized.py** - –°—Ä–µ–¥–∞ –æ–±—É—á–µ–Ω–∏—è —Å —É—Å–∏–ª–µ–Ω–Ω—ã–º —Ñ–æ–∫—É—Å–æ–º –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–æ —Å–¥–µ–ª–æ–∫

---

## üîë –ö–õ–Æ–ß–ï–í–´–ï –û–°–û–ë–ï–ù–ù–û–°–¢–ò

### 1. –ì–ê–†–ê–ù–¢–ò–†–û–í–ê–ù–ù–´–ô RR RATIO ‚â• 1.5
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π RR**: 1.5 (–∂–µ—Å—Ç–∫–æ –∑–∞–¥–∞–Ω)
- **–ë–∞–∑–æ–≤—ã–π RR**: 2.0 (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π)
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –≤—Ö–æ–¥–µ**: –í—Å–µ —Å–¥–µ–ª–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º—É RR –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: RR —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è –∏ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è

### 2. –£–ñ–ï–°–¢–û–ß–ï–ù–ù–´–ï –§–ò–õ–¨–¢–†–´ –í–•–û–î–ê
```python
# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤:
min_trend_strength = 0.25        # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–∏–ª–∞ —Ç—Ä–µ–Ω–¥–∞
min_volume_ratio = 0.8          # –ú–∏–Ω–∏–º—É–º 80% –æ—Ç —Å—Ä–µ–¥–Ω–µ–≥–æ –æ–±—ä–µ–º–∞
max_volatility_ratio = 2.2      # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å
min_rsi_threshold = 0.05         # RSI –Ω–µ –≤ —ç–∫—Å—Ç—Ä–µ–º—É–º–∞—Ö
max_rsi_threshold = 0.85
```

**–§–∏–ª—å—Ç—Ä—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç:**
- –í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å (ATR): 0.1% - 4% –æ—Ç —Ü–µ–Ω—ã
- –¢—Ä–µ–Ω–¥ (trend_bias_1h): –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
- RSI: –Ω–µ –≤ —ç–∫—Å—Ç—Ä–µ–º—É–º–∞—Ö
- –û–±—ä–µ–º: –º–∏–Ω–∏–º—É–º 80% –æ—Ç —Å—Ä–µ–¥–Ω–µ–≥–æ
- **RR Ratio**: –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ ‚â• 1.5

### 3. –£–õ–£–ß–®–ï–ù–ù–´–ï TP –£–†–û–í–ù–ò
```python
tp_levels = [1.8, 2.5, 3.5]  # –ú–Ω–æ–∂–∏—Ç–µ–ª–∏ ATR –¥–ª—è TP
tp_close_percentages = [0.25, 0.35, 0.40]  # –ü—Ä–æ—Ü–µ–Ω—Ç –∑–∞–∫—Ä—ã—Ç–∏—è –Ω–∞ –∫–∞–∂–¥–æ–º —É—Ä–æ–≤–Ω–µ
```

**–õ–æ–≥–∏–∫–∞ —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è:**
- TP1 (1.8x ATR): –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è 25% –ø–æ–∑–∏—Ü–∏–∏
- TP2 (2.5x ATR): –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è 35% –ø–æ–∑–∏—Ü–∏–∏  
- TP3 (3.5x ATR): –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è 40% –ø–æ–∑–∏—Ü–∏–∏
- –ü–æ—Å–ª–µ TP1 –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è —Ç—Ä–µ–π–ª–∏–Ω–≥-—Å—Ç–æ–ø

### 4. –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–´–ô –¢–†–ï–ô–õ–ò–ù–ì-–°–¢–û–ü
```python
trailing_activation_atr = 0.35   # –ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø—Ä–∏ –ø—Ä–∏–±—ã–ª–∏ 0.35x ATR
trailing_distance_atr = 0.45     # –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç —Ü–µ–Ω—ã
protective_trailing_atr = 0.6     # –ó–∞—â–∏—Ç–Ω—ã–π —Å—Ç–æ–ø –ø—Ä–∏ –ø—Ä–æ—Å–∞–¥–∫–µ
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø–æ—Å–ª–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø–µ—Ä–≤–æ–≥–æ TP
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ (—É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –ø—Ä–∏ –±–æ–ª—å—à–æ–π –ø—Ä–∏–±—ã–ª–∏)
- –ó–∞—â–∏—Ç–Ω—ã–π —Å—Ç–æ–ø –ø—Ä–∏ –ø—Ä–æ—Å–∞–¥–∫–µ > 40%

### 5. –£–ü–†–ê–í–õ–ï–ù–ò–ï –†–ò–°–ö–ê–ú–ò
```python
base_margin_percent = 0.07       # –ë–∞–∑–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ 7%
min_sl_percent = 0.002          # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π SL 0.2%
max_sl_percent = 0.010           # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π SL 1.0%
max_daily_trades = 5             # –ú–∞–∫—Å–∏–º—É–º 5 —Å–¥–µ–ª–æ–∫ –≤ –¥–µ–Ω—å
```

**–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–º:**
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ –ø—Ä–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —É–±—ã—Ç–∫–∞—Ö (√ó0.5)
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø—Ä–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–∏–±—ã–ª—è—Ö (–¥–æ √ó1.3)
- –ú–∏–Ω–∏–º—É–º 1%, –º–∞–∫—Å–∏–º—É–º 10% –æ—Ç –∫–∞–ø–∏—Ç–∞–ª–∞

### 6. REWARD –§–£–ù–ö–¶–ò–Ø (–° –§–û–ö–£–°–û–ú –ù–ê –ö–ê–ß–ï–°–¢–í–û)
```python
# –ù–∞–≥—Ä–∞–¥—ã:
tp_bonus_multiplier = 10.0      # –ë–æ–ª—å—à–∞—è –Ω–∞–≥—Ä–∞–¥–∞ –∑–∞ TP
tp_full_bonus = 15.0
sl_penalty_multiplier = 5.0     # –ë–æ–ª—å—à–æ–π —à—Ç—Ä–∞—Ñ –∑–∞ SL
quality_bonus = 8.0              # –ë–æ–Ω—É—Å –∑–∞ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—É—é —Å–¥–µ–ª–∫—É (>1.5%)

# –®—Ç—Ä–∞—Ñ—ã:
- SL —Å –ø–ª–æ—Ö–∏–º RR: -3.0 √ó (1.0 - rr)
- –ë–æ–ª—å—à–æ–π SL (>2%): -8.0
- –û–±—ã—á–Ω—ã–π SL: -4.0

# –ë–æ–Ω—É—Å—ã:
- TP –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ: +12.0 √ó (—É—Ä–æ–≤–µ–Ω—å √ó 0.8)
- –•–æ—Ä–æ—à–∏–π avg RR (>2.0): +6.0
```

---

## üìà –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –û–ë–£–ß–ï–ù–ò–Ø

### –ú–æ–¥–µ–ª—å: PPO (Proximal Policy Optimization)
```python
learning_rate = 1.5e-4
ent_coef = 0.015
n_steps = 2048
batch_size = 128
n_epochs = 15
gamma = 0.99
gae_lambda = 0.95
clip_range = 0.15
```

### –ü–æ—ç—Ç–∞–ø–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ:
1. **Phase 1 (5000 —à–∞–≥–æ–≤)**: –ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫ —Å—Ä–µ–¥–µ
2. **Phase 2 (5000 —à–∞–≥–æ–≤)**: –ö–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è –∑–Ω–∞–Ω–∏–π
3. **Phase 3 (10000 —à–∞–≥–æ–≤)**: –î–æ—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

### –ù–∞–±–ª—é–¥–µ–Ω–∏—è (Observation Space):
- –†—ã–Ω–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: open, high, low, close, volume, atr
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã: rsi_norm, trend_bias_1h, volatility_ratio, volume_ratio
- –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏: 12 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–ø–æ–∑–∏—Ü–∏—è, –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ —Ç.–¥.)

---

## üß™ –ü–õ–ê–ù –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### –≠—Ç–∞–ø 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å—Ä–µ–¥—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ RR ratio
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤—Ö–æ–¥–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π (LONG/SHORT)
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è TP
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–µ–π–ª–∏–Ω–≥-—Å—Ç–æ–ø–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å–¥–µ–ª–æ–∫

### –≠—Ç–∞–ø 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] –¢–µ—Å—Ç –Ω–∞ BTCUSDT (30 –¥–Ω–µ–π)
- [ ] –¢–µ—Å—Ç –Ω–∞ ETHUSDT (30 –¥–Ω–µ–π)
- [ ] –¢–µ—Å—Ç –Ω–∞ SOLUSDT (30 –¥–Ω–µ–π)
- [ ] –ê–Ω–∞–ª–∏–∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ RR
- [ ] –ê–Ω–∞–ª–∏–∑ win rate
- [ ] –ê–Ω–∞–ª–∏–∑ profit factor

### –≠—Ç–∞–ø 3: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è min_rr_ratio (1.5, 1.8, 2.0)
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è TP —É—Ä–æ–≤–Ω–µ–π
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤—Ö–æ–¥–∞
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è reward —Ñ—É–Ω–∫—Ü–∏–∏

### –≠—Ç–∞–ø 4: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º–∏ –≤–µ—Ä—Å–∏—è–º–∏
- [ ] –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å v16
- [ ] –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å v18
- [ ] –ê–Ω–∞–ª–∏–∑ —É–ª—É—á—à–µ–Ω–∏–π

---

## üîç –ü–û–¢–ï–ù–¶–ò–ê–õ–¨–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –ò –£–õ–£–ß–®–ï–ù–ò–Ø

### –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. **–°–ª–∏—à–∫–æ–º –∂–µ—Å—Ç–∫–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã** –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –º–∞–ª–æ–º—É –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Å–¥–µ–ª–æ–∫
2. **RR –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å** –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –ø—Ä–∏–±—ã–ª—å–Ω—ã–µ —Å–¥–µ–ª–∫–∏
3. **–¢—Ä–µ–π–ª–∏–Ω–≥-—Å—Ç–æ–ø –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø–æ–∑–¥–Ω–æ** (0.35x ATR) - –º–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–±—ã–ª—å

### –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é:
1. **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã**: –æ—Å–ª–∞–±–ª—è—Ç—å –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–¥–µ–ª–æ–∫
2. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π min_rr_ratio**: —Å–Ω–∏–∂–∞—Ç—å –ø—Ä–∏ –Ω–∏–∑–∫–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
3. **–†–∞–Ω–Ω—è—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è —Ç—Ä–µ–π–ª–∏–Ω–≥–∞**: –ø—Ä–∏ 0.25x ATR –≤–º–µ—Å—Ç–æ 0.35x
4. **–£–ª—É—á—à–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –±–æ–ª—å—à–µ –º–µ—Ç—Ä–∏–∫ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

---

## üìù –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±—É—á–µ–Ω–∏–µ** –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
3. **–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** –æ–±—É—á–µ–Ω–∏—è
4. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
5. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ live.py** –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏
