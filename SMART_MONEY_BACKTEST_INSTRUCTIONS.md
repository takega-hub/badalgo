# üß™ –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ó–ê–ü–£–°–ö–£ –ë–≠–ö–¢–ï–°–¢–ê SMART_MONEY_HYBRID

## üìã –û–ü–ò–°–ê–ù–ò–ï

–ë—ç–∫—Ç–µ—Å—Ç `backtest_smart_money_hybrid.py` —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç –≥–∏–±—Ä–∏–¥–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é SMART_MONEY_HYBRID –∏ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏ ICT –∏ SMC.

## üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

### –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫ (BTCUSDT, 30 –¥–Ω–µ–π)
```bash
python backtest_smart_money_hybrid.py
```

### –ó–∞–ø—É—Å–∫ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
```bash
python backtest_smart_money_hybrid.py \
    --symbols BTCUSDT \
    --timeframe 15m \
    --balance 1000 \
    --risk 0.02 \
    --days 30 \
    --output-dir results
```

## üìä –ü–ê–†–ê–ú–ï–¢–†–´

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|----------|--------------|
| `--symbols` | –°–ø–∏—Å–æ–∫ —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è | BTCUSDT |
| `--timeframe` | –¢–∞–π–º—Ñ—Ä–µ–π–º –¥–∞–Ω–Ω—ã—Ö (15m, 1h, 4h) | 15m |
| `--balance` | –ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –≤ USD | 1000.0 |
| `--risk` | –†–∏—Å–∫ –Ω–∞ —Å–¥–µ–ª–∫—É (0.02 = 2%) | 0.02 |
| `--days` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –Ω–∞–∑–∞–¥ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö | 30 |
| `--output-dir` | –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ | results |

## üìà –ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø

### –¢–µ—Å—Ç –Ω–∞ BTCUSDT —Å –±–æ–ª—å—à–∏–º –ø–µ—Ä–∏–æ–¥–æ–º
```bash
python backtest_smart_money_hybrid.py \
    --symbols BTCUSDT \
    --days 60
```

### –¢–µ—Å—Ç –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–∏–º–≤–æ–ª–∞—Ö
```bash
python backtest_smart_money_hybrid.py \
    --symbols BTCUSDT ETHUSDT SOLUSDT \
    --days 30
```

### –¢–µ—Å—Ç —Å –¥—Ä—É–≥–∏–º –±–∞–ª–∞–Ω—Å–æ–º –∏ —Ä–∏—Å–∫–æ–º
```bash
python backtest_smart_money_hybrid.py \
    --balance 5000 \
    --risk 0.01 \
    --symbols BTCUSDT
```

## üìÅ –†–ï–ó–£–õ–¨–¢–ê–¢–´

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±—ç–∫—Ç–µ—Å—Ç–∞ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `results/` –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã —Ñ–∞–π–ª—ã:

1. **smart_money_comparison_YYYYMMDD_HHMMSS.csv**
   - –î–µ—Ç–∞–ª—å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
   - –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (PnL, Win Rate, Profit Factor –∏ —Ç.–¥.)

2. **smart_money_backtest_report_YYYYMMDD_HHMMSS.txt**
   - –¢–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç—á–µ—Ç —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ HYBRID —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏
   - –ê–Ω–∞–ª–∏–∑ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–∏–≥–Ω–∞–ª–æ–≤

## üìä –ß–¢–û –ü–û–ö–ê–ó–´–í–ê–ï–¢ –ë–≠–ö–¢–ï–°–¢

### –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:
- **Total Trades** - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–¥–µ–ª–æ–∫
- **Win Rate** - –ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö —Å–¥–µ–ª–æ–∫
- **Total PnL** - –æ–±—â–∞—è –ø—Ä–∏–±—ã–ª—å/—É–±—ã—Ç–æ–∫
- **Profit Factor** - —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –ø—Ä–∏–±—ã–ª–∏ –∫ —É–±—ã—Ç–∫–∞–º
- **Max Drawdown** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å–∞–¥–∫–∞
- **Sharpe Ratio** - –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –®–∞—Ä–ø–∞
- **Avg Win / Avg Loss** - —Å—Ä–µ–¥–Ω—è—è –ø—Ä–∏–±—ã–ª—å/—É–±—ã—Ç–æ–∫
- **Total Signals** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π:
- **HYBRID vs ICT** - —É–ª—É—á—à–µ–Ω–∏–µ/—É—Ö—É–¥—à–µ–Ω–∏–µ PnL –∏ Win Rate
- **HYBRID vs SMC** - —É–ª—É—á—à–µ–Ω–∏–µ/—É—Ö—É–¥—à–µ–Ω–∏–µ PnL –∏ Win Rate
- **–õ—É—á—à–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è** - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º—É PnL
- **–ê–Ω–∞–ª–∏–∑ —Å–∏–≥–Ω–∞–ª–æ–≤** - —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–∏–≥–Ω–∞–ª–æ–≤

## üîç –ò–ù–¢–ï–†–ü–†–ï–¢–ê–¶–ò–Ø –†–ï–ó–£–õ–¨–¢–ê–¢–û–í

### ‚úÖ –•–æ—Ä–æ—à–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (HYBRID –ª—É—á—à–µ):
- HYBRID –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –±–æ–ª—å—à–∏–π PnL —á–µ–º ICT –∏ SMC
- Win Rate HYBRID –≤—ã—à–µ –∏–ª–∏ —Ä–∞–≤–µ–Ω –ª—É—á—à–µ–º—É –∏–∑ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö
- Profit Factor HYBRID > 1.5
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–æ–≤ —Ä–∞–∑—É–º–Ω–æ–µ (–Ω–µ —Å–ª–∏—à–∫–æ–º –º–∞–ª–æ, –Ω–µ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ)

**–î–µ–π—Å—Ç–≤–∏–µ:** –ú–æ–∂–Ω–æ –≤–Ω–µ–¥—Ä—è—Ç—å –≤ live trading

### ‚ö†Ô∏è –°–º–µ—à–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- HYBRID –ª—É—á—à–µ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏, –Ω–æ —Ö—É–∂–µ –¥—Ä—É–≥–æ–π
- Win Rate —É–ª—É—á—à–∏–ª—Å—è, –Ω–æ PnL —Å–Ω–∏–∑–∏–ª—Å—è (–∏–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç)
- –°–ª–∏—à–∫–æ–º –º–∞–ª–æ —Å–∏–≥–Ω–∞–ª–æ–≤ (–ø–µ—Ä–µ–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)

**–î–µ–π—Å—Ç–≤–∏–µ:** –ù—É–∂–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### ‚ùå –ü–ª–æ—Ö–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (HYBRID —Ö—É–∂–µ):
- HYBRID –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–µ–Ω—å—à–∏–π PnL —á–µ–º –æ–±–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- Win Rate –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –Ω–∏–∂–µ
- –°–ª–∏—à–∫–æ–º –º–∞–ª–æ —Å–∏–≥–Ω–∞–ª–æ–≤ (—Ñ–∏–ª—å—Ç—Ä—ã —Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–∏–µ)

**–î–µ–π—Å—Ç–≤–∏–µ:** –ü–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏–∫—É –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –∏–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

## üõ†Ô∏è –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø –ü–ê–†–ê–ú–ï–¢–†–û–í

–ï—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–µ—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω—ã–µ, –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ `bot/smart_money_hybrid.py`:

```python
# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–∏–±—Ä–∏–¥–Ω–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
self.require_ob_confirmation = True  # –¢—Ä–µ–±–æ–≤–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ Order Block
self.fvg_overlap_tolerance = 0.3    # –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ –∑–æ–Ω (30%)
self.require_both_trend_filters = True  # –¢—Ä–µ–±–æ–≤–∞—Ç—å –æ–±–∞ —Ñ–∏–ª—å—Ç—Ä–∞ —Ç—Ä–µ–Ω–¥–∞
```

–ò–ª–∏ –≤ `bot/config.py` –¥–æ–±–∞–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
```python
hybrid_require_ob_confirmation = True
hybrid_fvg_overlap_tolerance = 0.3
hybrid_require_both_trend_filters = True
```

## üìù –ó–ê–ú–ï–¢–ö–ò

1. **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** –ë—ç–∫—Ç–µ—Å—Ç –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö
2. **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:** –ù—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø –∫ Bybit API –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
3. **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:** –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—ç–∫—Ç–µ—Å—Ç–∞ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç —Ç–∞–∫–∏–µ –∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ live trading
4. **–°–∏–º–≤–æ–ª—ã:** –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ BTCUSDT, –≥–¥–µ ICT –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ö–æ—Ä–æ—à–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

## üÜò –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú

### –û—à–∏–±–∫–∞ "No data for symbol"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API –∫–ª—é—á–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–∏–º–≤–æ–ª–∞ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ BTCUSDT)

### –û—à–∏–±–∫–∞ "No signals generated"
- –£–≤–µ–ª–∏—á—å—Ç–µ –ø–µ—Ä–∏–æ–¥ –¥–∞–Ω–Ω—ã—Ö (`--days`)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã (Silver Bullet –æ–∫–Ω–∞ –¥–ª—è ICT)

### –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ –º–æ–¥—É–ª–µ–π
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –∏–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (`pip install -r requirements.txt`)

## üìö –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø

- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏: `SMART_MONEY_HYBRID_INFO.md`
- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—é: `STRATEGY_MERGE_PROPOSAL.md`
- –†–µ–∑—é–º–µ –ø—Ä–æ–µ–∫—Ç–∞: `STRATEGY_MERGE_SUMMARY.md`
- –ö–æ–¥ –≥–∏–±—Ä–∏–¥–Ω–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏: `bot/smart_money_hybrid.py`
