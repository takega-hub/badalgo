# üìã –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø –°–¢–†–ê–¢–ï–ì–ò–ò V17_2_OPTIMIZED

## üéØ –û–ë–©–ï–ï –û–ü–ò–°–ê–ù–ò–ï

–°—Ç—Ä–∞—Ç–µ–≥–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **PPO (Proximal Policy Optimization)** –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π –æ –≤—Ö–æ–¥–µ/–≤—ã—Ö–æ–¥–µ –∏–∑ –ø–æ–∑–∏—Ü–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∏ —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

**–§–∞–π–ª—ã:**
- `bot/crypto_env_v17_2_optimized.py` - —Å—Ä–µ–¥–∞ –æ–±—É—á–µ–Ω–∏—è —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞
- `bot/train_v17_2_optimized.py` - —Å–∫—Ä–∏–ø—Ç –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏

---

## üö™ –°–¢–†–ê–¢–ï–ì–ò–Ø –í–•–û–î–ê (–£—Å–ª–æ–≤–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏)

–í—Å–µ —É—Å–ª–æ–≤–∏—è –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤ –º–µ—Ç–æ–¥–µ `_check_entry_filters_strict()` –≤ —Ñ–∞–π–ª–µ `crypto_env_v17_2_optimized.py` (—Å—Ç—Ä–æ–∫–∏ 683-869).

### 1. –§–ò–õ–¨–¢–† –ü–û ATR (Average True Range)

**–£—Å–ª–æ–≤–∏—è:**
- **–ü—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä:** `atr_percent = atr / price` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ `[0.001, 0.04]` (0.1% - 4%)
- **–ê–±—Å–æ–ª—é—Ç–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä:** `atr >= 85.0` (–ø—Ä–∏–±—ã–ª—å–Ω—ã–µ —Å–¥–µ–ª–∫–∏ –∏–º–µ—é—Ç atr > 100, —É–±—ã—Ç–æ—á–Ω—ã–µ = 78.93)

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:** ATR –≤–ª–∏—è–µ—Ç –Ω–∞ Win Rate —Å —Ä–∞–∑–Ω–∏—Ü–µ–π 43.1% (Q1: 8.3% vs Q4: 51.4%)

### 2. –§–ò–õ–¨–¢–† –ü–û –°–ò–õ–ï –¢–†–ï–ù–î–ê (ADX + DI)

**–£—Å–ª–æ–≤–∏—è:**
- **ADX (Average Directional Index):**
  - –î–ª—è LONG: `adx >= 25.0` (—Å–∏–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥)
  - –î–ª—è SHORT: `adx >= 20.0` (—á—É—Ç—å –º—è–≥—á–µ –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —à–æ—Ä—Ç–æ–≤)
  
- **–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞ (+DI –∏ -DI):**
  - –î–ª—è LONG: `plus_di > minus_di` (–≤–æ—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–µ–Ω–¥)
  - –î–ª—è SHORT: `minus_di > plus_di * 0.95` (–Ω–∏—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–µ–Ω–¥, –¥–æ–ø—É—Å–∫–∞–µ–º –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–ø–∞—Å)

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:** ADX –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∏–ª—É —Ç—Ä–µ–Ω–¥–∞, DI - –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ. –¢—Ä–µ–Ω–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —è–≤–Ω—ã–º.

### 3. –§–ò–õ–¨–¢–† –ü–û RSI (Relative Strength Index)

**–†–∞–∑–¥–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –¥–ª—è LONG –∏ SHORT:**

**LONG –ø–æ–∑–∏—Ü–∏–∏:**
- `rsi_norm` –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ `[0.15, 0.60]` (–ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç—å)
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç RSI ~15-40 (–∑–æ–Ω–∞ –ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç–∏)

**SHORT –ø–æ–∑–∏—Ü–∏–∏:**
- `rsi_norm` –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ `[0.35, 0.85]` (–ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç—å, —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–æ –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è —à–æ—Ä—Ç–æ–≤)
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç RSI ~35-85 (–∑–æ–Ω–∞ –ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç–∏)

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:** RSI –∏–º–µ–µ—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—é 0.157 —Å PnL –∏ –≤–ª–∏—è–µ—Ç –Ω–∞ WR (—Ä–∞–∑–Ω–∏—Ü–∞ 26.4%)

### 4. –§–ò–õ–¨–¢–† –ü–û –û–ë–™–ï–ú–£ (Volume)

**–î–≤–æ–π–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä:**

**–ê–±—Å–æ–ª—é—Ç–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä:**
- `volume >= 800.0` (–ø—Ä–∏–±—ã–ª—å–Ω—ã–µ —Å–¥–µ–ª–∫–∏: 1361.7, —É–±—ã—Ç–æ—á–Ω—ã–µ: 760.4)

**–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä (–≤—Å–ø–ª–µ—Å–∫):**
- –î–ª—è LONG: `volume_ratio >= 1.5` (—Ç–µ–∫—É—â–∏–π –æ–±—ä–µ–º –≤ 1.5x –±–æ–ª—å—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ –∑–∞ 20 —Å–≤–µ—á–µ–π)
- –î–ª—è SHORT: `volume_ratio >= 1.1` (–º—è–≥—á–µ –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è —à–æ—Ä—Ç–æ–≤)

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:** Volume –∏–º–µ–µ—Ç —Ä–∞–∑–Ω–∏—Ü—É 79.1% –º–µ–∂–¥—É –ø—Ä–∏–±—ã–ª—å–Ω—ã–º–∏ –∏ —É–±—ã—Ç–æ—á–Ω—ã–º–∏ —Å–¥–µ–ª–∫–∞–º–∏!

### 5. –§–ò–õ–¨–¢–† –ü–û –î–í–ò–ñ–ï–ù–ò–Æ –û–¢ –≠–ö–°–¢–†–ï–ú–£–ú–ê

**–£—Å–ª–æ–≤–∏—è:**
- –î–ª—è LONG: —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç –º–∏–Ω–∏–º—É–º–∞ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–≤–µ—á–µ–π >= 1.0%
- –î–ª—è SHORT: —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç –º–∞–∫—Å–∏–º—É–º–∞ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–≤–µ—á–µ–π >= 0.5%

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:** –ò–∑–±–µ–≥–∞–µ–º –≤—Ö–æ–¥–∞ —Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ –∫ —ç–∫—Å—Ç—Ä–µ–º—É–º–∞–º (–∞–Ω—Ç–∏-chasing)

### 6. –§–ò–õ–¨–¢–† –ü–û VOLATILITY_RATIO

**–£—Å–ª–æ–≤–∏—è:**
- `volatility_ratio >= 0.0020` (–º–∏–Ω–∏–º—É–º)
- `volatility_ratio <= 1.5` (–º–∞–∫—Å–∏–º—É–º)

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:** 
- –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è —Å PnL: 0.340 (—Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π –ø—Ä–∏–∑–Ω–∞–∫!)
- –†–∞–∑–Ω–∏—Ü–∞ Win Rate: 41.7% (Q1: 11.1% vs Q4: 52.8%)
- –ü—Ä–∏–±—ã–ª—å–Ω—ã–µ —Å–¥–µ–ª–∫–∏: 0.0028, —É–±—ã—Ç–æ—á–Ω—ã–µ: 0.0018

### 7. –ì–ê–†–ê–ù–¢–ò–Ø MIN RR RATIO ‚â• 1.5

**–†–∞—Å—á–µ—Ç:**
1. SL —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ: `max(atr * 2.2, price * 0.003)` –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ `price * 0.007`
2. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π TP –¥–ª—è RR: `sl_distance * 1.5`
3. –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π TP: `max(min_tp_for_rr, atr * 2.2, price * 0.006)`
4. –ü—Ä–æ–≤–µ—Ä–∫–∞: `actual_rr = tp_distance / sl_distance >= 1.5`

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–∏–º–æ—Å—Ç–∏:**
- –î–ª—è LONG: `tp_percent_needed <= 2.0%`
- –î–ª—è SHORT: `tp_percent_needed <= 3.0%` (–º—è–≥—á–µ)

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:** –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π Risk-Reward ratio 1.5:1 –¥–ª—è –∫–∞–∂–¥–æ–π —Å–¥–µ–ª–∫–∏

---

## üö™ –°–¢–†–ê–¢–ï–ì–ò–Ø –í–´–•–û–î–ê (–£—Å–ª–æ–≤–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏)

### 1. –ß–ê–°–¢–ò–ß–ù–û–ï –ó–ê–ö–†–´–¢–ò–ï –ü–û TP (Take Profit)

**–ú–µ—Ç–æ–¥:** `_check_partial_tp()` (—Å—Ç—Ä–æ–∫–∏ 996-1027)

**TP –£—Ä–æ–≤–Ω–∏:**
- **TP1:** `entry_price ¬± (atr * 2.2)` - –∑–∞–∫—Ä—ã–≤–∞–µ–º 25% –ø–æ–∑–∏—Ü–∏–∏
- **TP2:** `entry_price ¬± (atr * 2.8)` - –∑–∞–∫—Ä—ã–≤–∞–µ–º 35% –ø–æ–∑–∏—Ü–∏–∏  
- **TP3:** `entry_price ¬± (atr * 3.6)` - –∑–∞–∫—Ä—ã–≤–∞–µ–º 40% –ø–æ–∑–∏—Ü–∏–∏

**–õ–æ–≥–∏–∫–∞:**
- –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ TP1 –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è —Ç—Ä–µ–π–ª–∏–Ω–≥-—Å—Ç–æ–ø
- –ö–∞–∂–¥—ã–π —É—Ä–æ–≤–µ–Ω—å –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
- –ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –≤—Å–µ—Ö TP —É—Ä–æ–≤–Ω–µ–π ‚Üí –ø–æ–ª–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ (TP_FULL)

### 2. –¢–†–ï–ô–õ–ò–ù–ì-–°–¢–û–ü (Trailing Stop Loss)

**–ú–µ—Ç–æ–¥:** `_update_trailing_stop()` (—Å—Ç—Ä–æ–∫–∏ 1118-1181)

**–ê–∫—Ç–∏–≤–∞—Ü–∏—è:**
- –¢—Ä–µ–π–ª–∏–Ω–≥ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –ø—Ä–∏–±—ã–ª–∏ >= `(atr / entry_price) * 0.35`
- –î–ª—è SHORT: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ—Ç –∂–µ –ø–æ—Ä–æ–≥ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏

**–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ:**
- **–ë–∞–∑–æ–≤–∞—è –¥–∏—Å—Ç–∞–Ω—Ü–∏—è:** `atr * 0.45` (–¥–ª—è LONG –∏ SHORT)
- **–ü—Ä–∏ –ø—Ä–∏–±—ã–ª–∏ > 2%:** —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –¥–æ `atr * 0.3825` (0.45 * 0.85)
- **–ü—Ä–∏ –ø—Ä–∏–±—ã–ª–∏ > 1.5%:** —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –¥–æ `atr * 0.405` (0.45 * 0.90)
- **–ü—Ä–∏ –ø—Ä–∏–±—ã–ª–∏ < 1.5%:** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–ª–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ (–∑–∞—â–∏—Ç–∞ –æ—Ç –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π)

**–ó–∞—â–∏—Ç–Ω—ã–π —Å—Ç–æ–ø:**
- –ü—Ä–∏ –ø—Ä–æ—Å–∞–¥–∫–µ –æ—Ç –º–∞–∫—Å–∏–º—É–º–∞ –ø—Ä–∏–±—ã–ª–∏ > 40% –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –∑–∞—â–∏—Ç–Ω—ã–π —Å—Ç–æ–ø –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ `atr * 0.5`

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:** –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–∫—Ä—ã—Ç–∏–π (–±—ã–ª–æ 56.2% SL_TRAILING)

### 3. –ü–û–õ–ù–û–ï –ó–ê–ö–†–´–¢–ò–ï

**–ú–µ—Ç–æ–¥:** `_check_full_close()` (—Å—Ç—Ä–æ–∫–∏ 1183-1213)

**–£—Å–ª–æ–≤–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è:**

1. **SL_INITIAL / SL_TRAILING:**
   - LONG: `current_price <= current_sl`
   - SHORT: `current_price >= current_sl`
   - –¢–∏–ø –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ–º –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç—Ä–µ–π–ª–∏–Ω–≥–∞

2. **TP_FULL:**
   - –í—Å–µ TP —É—Ä–æ–≤–Ω–∏ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—ã ‚Üí –ø–æ–ª–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ

3. **TIME_EXIT:**
   - –ü–æ–∑–∏—Ü–∏—è —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è >= 60 —à–∞–≥–æ–≤ (15 —á–∞—Å–æ–≤ –Ω–∞ 15-–º–∏–Ω—É—Ç–Ω—ã—Ö —Å–≤–µ—á–∞—Ö)

4. **MANUAL:**
   - –ú–æ–¥–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ (LONG ‚Üí SHORT –∏–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç)
   - –¢—Ä–µ–±—É–µ—Ç—Å—è —É–¥–µ—Ä–∂–∞–Ω–∏–µ >= 80% –æ—Ç max_hold_steps (48 —à–∞–≥–æ–≤)

---

## üìä –ü–†–ò–ó–ù–ê–ö–ò –î–õ–Ø –û–ë–£–ß–ï–ù–ò–Ø –ú–û–î–ï–õ–ò

**–§–∞–π–ª:** `train_v17_2_optimized.py` (—Å—Ç—Ä–æ–∫–∏ 450-563)

### –ë–ê–ó–û–í–´–ï –ü–†–ò–ó–ù–ê–ö–ò (6)
1. `open` - —Ü–µ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è —Å–≤–µ—á–∏
2. `high` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ —Å–≤–µ—á–∏
3. `low` - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ —Å–≤–µ—á–∏
4. `close` - —Ü–µ–Ω–∞ –∑–∞–∫—Ä—ã—Ç–∏—è —Å–≤–µ—á–∏
5. `volume` - –æ–±—ä–µ–º —Ç–æ—Ä–≥–æ–≤
6. `atr` - Average True Range (–≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å)

### –ü–†–ò–ó–ù–ê–ö–ò –° –ü–û–õ–û–ñ–ò–¢–ï–õ–¨–ù–û–ô –ö–û–†–†–ï–õ–Ø–¶–ò–ï–ô (3)
7. `volatility_ratio` - —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ (–∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è: 0.340, —Ä–∞–∑–Ω–∏—Ü–∞ WR: 41.7%)
8. `rsi_norm` - –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π RSI (–∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è: 0.157, —Ä–∞–∑–Ω–∏—Ü–∞ WR: 26.4%)
9. `volume_ratio` - —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –æ–±—ä–µ–º–∞ –∫ —Å—Ä–µ–¥–Ω–µ–º—É (–∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è: 0.145, —Ä–∞–∑–Ω–∏—Ü–∞ WR: 16.7%)

### –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –ò–ù–î–ò–ö–ê–¢–û–†–´ (5)
10. `bb_position` - –ø–æ–∑–∏—Ü–∏—è –≤ Bollinger Bands (–ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç—å/–ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç—å)
11. `momentum` - –º–æ–º–µ–Ω—Ç—É–º —Ü–µ–Ω—ã (—Å–∏–ª–∞ –¥–≤–∏–∂–µ–Ω–∏—è)
12. `adx` - Average Directional Index (—Å–∏–ª–∞ —Ç—Ä–µ–Ω–¥–∞)
13. `plus_di` - –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞ –≤–≤–µ—Ä—Ö (+DI)
14. `minus_di` - –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞ –≤–Ω–∏–∑ (-DI)

### TP-–û–†–ò–ï–ù–¢–ò–†–û–í–ê–ù–ù–´–ï –ü–†–ò–ó–ù–ê–ö–ò (12)
15. `tp_up_atr_1` - —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ TP1 –¥–ª—è LONG
16. `tp_up_prob_1` - –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è TP1 –¥–ª—è LONG
17. `tp_up_atr_2` - —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ TP2 –¥–ª—è LONG
18. `tp_up_prob_2` - –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è TP2 –¥–ª—è LONG
19. `tp_down_atr_1` - —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ TP1 –¥–ª—è SHORT
20. `tp_down_prob_1` - –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è TP1 –¥–ª—è SHORT
21. `tp_down_atr_2` - —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ TP2 –¥–ª—è SHORT
22. `tp_down_prob_2` - –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è TP2 –¥–ª—è SHORT
23. `sl_up_atr` - —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ SL –¥–ª—è LONG
24. `sl_down_atr` - —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ SL –¥–ª—è SHORT
25. `progress_to_tp_up_1` - –ø—Ä–æ–≥—Ä–µ—Å—Å –∫ TP1 –¥–ª—è LONG (–¥–∏–Ω–∞–º–∏–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è)
26. `progress_to_tp_down_1` - –ø—Ä–æ–≥—Ä–µ—Å—Å –∫ TP1 –¥–ª—è SHORT (–¥–∏–Ω–∞–º–∏–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è)

### –ë–ê–ó–û–í–´–ï –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ü–†–ò–ó–ù–ê–ö–ò (4)
27. `log_ret` - –ª–æ–≥–∞—Ä–∏—Ñ–º–∏—á–µ—Å–∫–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å
28. `returns` - –ø—Ä–æ—Å—Ç–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å
29. `high_low_ratio` - —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ high/low
30. `close_open_ratio` - —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ close/open

### –°–û–°–¢–û–Ø–ù–ò–ï –ü–û–ó–ò–¶–ò–ò (12 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)
31-42. –í–µ–∫—Ç–æ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏:
- –ü–æ–∑–∏—Ü–∏—è (LONG/SHORT/HOLD)
- –®–∞–≥–∏ —Å –º–æ–º–µ–Ω—Ç–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è
- –®–∞–≥–∏ —Å –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–¥–µ–ª–∫–∏
- –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ —É–±—ã—Ç–∫–∏/–ø—Ä–∏–±—ã–ª–∏
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–∞–ø–∏—Ç–∞–ª–∞
- –ü—Ä–æ—Å–∞–¥–∫–∞ –æ—Ç –º–∞–∫—Å–∏–º—É–º–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –º–∞—Ä–∂–∞
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–¥–µ–ª–æ–∫

**–ò–¢–û–ì–û: 30 —Ä—ã–Ω–æ—á–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ + 12 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è = 42 –ø—Ä–∏–∑–Ω–∞–∫–∞**

### –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–ï –ü–†–ò–ó–ù–ê–ö–û–í

–í–∞–∂–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É—é—Ç—Å—è –¥–ª—è —É—Å–∏–ª–µ–Ω–∏—è –∏—Ö –≤–ª–∏—è–Ω–∏—è:
- `rsi_norm`: √ó3.0 (—Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π)
- `volume`: √ó2.0
- `atr`: √ó1.5
- `close`: √ó1.0 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç)
- `volume_ratio`: √ó0.5 (–º–µ–Ω—å—à–∏–π –≤–µ—Å)

### –ò–°–ö–õ–Æ–ß–ï–ù–ù–´–ï –ü–†–ò–ó–ù–ê–ö–ò

- `trend_bias_1h` - **–ò–°–ö–õ–Æ–ß–ï–ù** –∏–∑ –Ω–∞–±–ª—é–¥–µ–Ω–∏–π (–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è: -0.030)
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ö –≤—Ö–æ–¥–∞, –Ω–æ –ù–ï –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –º–æ–¥–µ–ª–∏

---

## ‚öôÔ∏è –ü–ê–†–ê–ú–ï–¢–†–´ –°–¢–†–ê–¢–ï–ì–ò–ò

### –£–ü–†–ê–í–õ–ï–ù–ò–ï –†–ò–°–ö–ê–ú–ò
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π RR:** 1.5:1 (–≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–π —Å–¥–µ–ª–∫–∏)
- **ATR multiplier –¥–ª—è SL:** 2.2
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π SL:** 0.3% –æ—Ç —Ü–µ–Ω—ã
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π SL:** 0.7% –æ—Ç —Ü–µ–Ω—ã
- **–†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏:** 7% –æ—Ç –∫–∞–ø–∏—Ç–∞–ª–∞ (–±–∞–∑–æ–≤—ã–π)

### TP –£–†–û–í–ù–ò
- **TP1:** `atr * 2.2` (25% –ø–æ–∑–∏—Ü–∏–∏)
- **TP2:** `atr * 2.8` (35% –ø–æ–∑–∏—Ü–∏–∏)
- **TP3:** `atr * 3.6` (40% –ø–æ–∑–∏—Ü–∏–∏)

### –¢–†–ï–ô–õ–ò–ù–ì-–°–¢–û–ü
- **–ê–∫—Ç–∏–≤–∞—Ü–∏—è:** –ø—Ä–∏ –ø—Ä–∏–±—ã–ª–∏ >= `(atr / entry_price) * 0.35`
- **–ë–∞–∑–æ–≤–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ:** `atr * 0.45`
- **–ó–∞—â–∏—Ç–Ω—ã–π —Å—Ç–æ–ø:** `atr * 0.5` –ø—Ä–∏ –ø—Ä–æ—Å–∞–¥–∫–µ >40%

### –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø
- **–ú–∞–∫—Å–∏–º—É–º —Å–¥–µ–ª–æ–∫ –≤ –¥–µ–Ω—å:** 5
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø–∞—É–∑–∞ –º–µ–∂–¥—É —Å–¥–µ–ª–∫–∞–º–∏:** 10 —à–∞–≥–æ–≤ (2.5 —á–∞—Å–∞)
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —É–¥–µ—Ä–∂–∞–Ω–∏–µ:** 60 —à–∞–≥–æ–≤ (15 —á–∞—Å–æ–≤)
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —É–¥–µ—Ä–∂–∞–Ω–∏–µ:** 8 —à–∞–≥–æ–≤ (2 —á–∞—Å–∞)

### –ë–ê–õ–ê–ù–°–ò–†–û–í–©–ò–ö LONG/SHORT
- –ü–æ—Å–ª–µ 3 —Å–¥–µ–ª–æ–∫ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫
- –ü—Ä–∏ –ø–µ—Ä–µ–∫–æ—Å–µ L/S > 1.5x –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ –Ω–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–µ
- –¶–µ–ª—å: –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É LONG –∏ SHORT –ø–æ–∑–∏—Ü–∏—è–º–∏

---

## üéØ –û–ë–£–ß–ï–ù–ò–ï –ú–û–î–ï–õ–ò

**–ê–ª–≥–æ—Ä–∏—Ç–º:** PPO (Proximal Policy Optimization) –∏–∑ stable-baselines3

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
- Policy Network: `[hidden_size, hidden_size//2, hidden_size//4]`
- Value Network: `[hidden_size, hidden_size//2, hidden_size//4]`
- `hidden_size = min(256, max(128, n_features * 2))`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—É—á–µ–Ω–∏—è:**
- Learning Rate: –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ —Ñ–∞–∑–∞–º (1.5e-4 ‚Üí 5.0e-5)
- Entropy Coefficient: 0.05 (–¥–ª—è —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è –¥–µ–π—Å—Ç–≤–∏–π)
- Batch Size: 128
- N Steps: 2048
- N Epochs: 15
- Gamma: 0.99
- GAE Lambda: 0.95
- Clip Range: 0.15

**–§–∞–∑—ã –æ–±—É—á–µ–Ω–∏—è (400,000 —à–∞–≥–æ–≤):**
1. Phase 1 (40k): –ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫ —Å—Ä–µ–¥–µ
2. Phase 2 (50k): –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
3. Phase 3 (60k): –ö–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è –∑–Ω–∞–Ω–∏–π
4. Phase 4 (70k): –£—Ç–æ—á–Ω–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
5. Phase 5 (80k): –ú–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ
6. Phase 6 (100k): –ü—Ä–µ–≤–æ—Å—Ö–æ–¥—Å—Ç–≤–æ

---

## üìà REWARD –§–£–ù–ö–¶–ò–Ø

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–∞–ø–∏—Ç–∞–ª–∞:** `tanh(equity_change * 40) * 1.5`
2. **–ë–æ–Ω—É—Å –∑–∞ –æ—Ç–∫—Ä—ã—Ç–∏–µ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö:**
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π RSI –≤—Ö–æ–¥: +0.1
   - –°–∏–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏: +4.0 (LONG) / +6.0 (SHORT)
   - –û—Ç–ª–∏—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è (ADX‚â•30, volume>1.2x): +5.0
3. **–®—Ç—Ä–∞—Ñ –∑–∞ –ø—Ä–æ–ø—É—Å–∫ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π:** -1.0 –¥–æ -3.0
4. **–ù–∞–≥—Ä–∞–¥–∞ –∑–∞ TP:** –¥–æ +48.0 (18.0 * —É—Ä–æ–≤–µ–Ω—å + 30.0 –∑–∞ PnL)
5. **–®—Ç—Ä–∞—Ñ –∑–∞ SL:** -6.0 –¥–æ -12.0 (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ —É–±—ã—Ç–∫–∞)
6. **–®—Ç—Ä–∞—Ñ –∑–∞ VERY_BAD —Å–¥–µ–ª–∫–∏:** -5.0
7. **–ë–æ–Ω—É—Å –∑–∞ –≤—ã—Å–æ–∫–∏–π RR:** –¥–æ +10.0
8. **–ë–æ–Ω—É—Å –∑–∞ —Å–µ—Ä–∏—é –ø—Ä–∏–±—ã–ª–µ–π:** –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª–∏–Ω–µ —Å–µ—Ä–∏–∏
9. **–®—Ç—Ä–∞—Ñ –∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è –¥–µ–π—Å—Ç–≤–∏–π:** –¥–æ -2.0

**–î–∏–∞–ø–∞–∑–æ–Ω reward:** `[-15.0, 35.0]`

---

## üîç –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò –ù–ê –û–°–ù–û–í–ï –ê–ù–ê–õ–ò–ó–ê

–í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ 288 —Å–¥–µ–ª–æ–∫:

1. **TP —É—Ä–æ–≤–Ω–∏:** —É–≤–µ–ª–∏—á–µ–Ω—ã —Å [1.8, 2.5, 3.5] –¥–æ [2.2, 2.8, 3.6] –¥–ª—è –ª—É—á—à–µ–≥–æ RR
2. **–¢—Ä–µ–π–ª–∏–Ω–≥-—Å—Ç–æ–ø:** –º–µ–Ω–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π (–∞–∫—Ç–∏–≤–∞—Ü–∏—è 0.35, —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ 0.45)
3. **ATR multiplier:** —É–º–µ–Ω—å—à–µ–Ω —Å 2.5 –¥–æ 2.2 –¥–ª—è –ª—É—á—à–µ–≥–æ RR
4. **–§–∏–ª—å—Ç—Ä—ã –ø–æ volume:** –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø–æ—Ä–æ–≥ 800 + –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –≤—Å–ø–ª–µ—Å–∫
5. **–§–∏–ª—å—Ç—Ä—ã –ø–æ ATR:** –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø–æ—Ä–æ–≥ 85
6. **–§–∏–ª—å—Ç—Ä—ã –ø–æ volatility_ratio:** –º–∏–Ω–∏–º—É–º 0.0020, –º–∞–∫—Å–∏–º—É–º 1.5

---

## üìù –õ–û–ì–ò–†–û–í–ê–ù–ò–ï

**–§–∞–π–ª—ã –ª–æ–≥–æ–≤:**
- `train_v17_2_log.csv` - –≤—Å–µ –∑–∞–∫—Ä—ã—Ç—ã–µ —Å–¥–µ–ª–∫–∏
- `opens_train_v17_2_log.csv` - –≤—Å–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏

**–ü–æ–ª—è –≤ –ª–æ–≥–µ —Å–¥–µ–ª–æ–∫:**
- step, type, entry, sl_initial, sl_current, tp_levels, exit, pnl_percent, net_worth
- exit_reason, duration, trailing, tp_closed, partial_closes, trade_quality, rr_ratio

---

## üöÄ –ú–£–õ–¨–¢–ò–¢–ê–ô–ú–§–†–ï–ô–ú–û–í–ê–Ø –í–ï–†–°–ò–Ø V18 MTF

–î–æ—Å—Ç—É–ø–Ω–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å –∞–Ω–∞–ª–∏–∑–æ–º –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞—Ö:

### –¢–∞–π–º—Ñ—Ä–µ–π–º—ã:
- **15m** - –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∞–π–º—Ñ—Ä–µ–π–º —Ç–æ—Ä–≥–æ–≤–ª–∏
- **1h** - —Ñ–∏–ª—å—Ç—Ä —Å—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω–æ–≥–æ —Ç—Ä–µ–Ω–¥–∞
- **4h** - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ç—Ä–µ–Ω–¥–∞

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

1. **MTF —Ñ–∏–ª—å—Ç—Ä—ã –≤—Ö–æ–¥–∞:**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–µ–Ω–¥–∞ –Ω–∞ 1h (ADX ‚â•22 –¥–ª—è LONG, ‚â•20 –¥–ª—è SHORT)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞ 4h
   - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤—Ö–æ–¥–æ–≤ –ø—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ —Ç—Ä–µ–Ω–¥–æ–≤ –º–µ–∂–¥—É –¢–§

2. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏:**
   - +20 MTF –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ (ADX, DI, RSI —Å 1h –∏ 4h)
   - –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ —Ç—Ä–µ–Ω–¥–æ–≤ –º–µ–∂–¥—É –¢–§
   - –ö–æ–Ω—Ñ–ª–∏–∫—Ç–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
   - –ó–æ–Ω–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –Ω–∞ –≤—Å–µ—Ö –¢–§

3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è TP/SL:**
   - –°—Ä–µ–¥–Ω–µ–≤–∑–≤–µ—à–µ–Ω–Ω—ã–π ATR (70% 15m + 20% 1h + 10% 4h)
   - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Å–µ–Ω—Å—É—Å–∞ —Ç—Ä–µ–Ω–¥–æ–≤
   - –£–≤–µ–ª–∏—á–µ–Ω–∏–µ TP –ø—Ä–∏ —Å–∏–ª—å–Ω–æ–º –∫–æ–Ω—Å–µ–Ω—Å—É—Å–µ (+20%)

4. **–£—Å–∏–ª–µ–Ω–Ω–∞—è reward:**
   - –ë–æ–Ω—É—Å –∑–∞ –≤—Ö–æ–¥ –≤ –Ω–∞—á–∞–ª–µ —Ç—Ä–µ–Ω–¥–∞ –Ω–∞ 4h: +3.0
   - –ë–æ–Ω—É—Å –∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞: +2.0
   - –®—Ç—Ä–∞—Ñ –∑–∞ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–ª—å–Ω–æ–≥–æ —Ç—Ä–µ–Ω–¥–∞: -4.0

**–§–∞–π–ª—ã:**
- `bot/crypto_env_v18_mtf.py` - MTF —Å—Ä–µ–¥–∞ –æ–±—É—á–µ–Ω–∏—è
- `bot/train_v18_mtf.py` - MTF —Å–∫—Ä–∏–ø—Ç –æ–±—É—á–µ–Ω–∏—è
- `bot/data_preprocessor_mtf.py` - –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ MTF –¥–∞–Ω–Ω—ã—Ö

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `MTF_IMPLEMENTATION.md` –∏ `MTF_QUICKSTART.md`

**–û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**
- Win Rate: +10-15% (55-65% vs 45-55%)
- –°—Ä–µ–¥–Ω–∏–π RR: +0.3-0.4 (1.8-2.2 vs 1.5-1.8)
- –ú–∞–∫—Å. –ø—Ä–æ—Å–∞–¥–∫–∞: -25-30% (8-11% vs 12-15%)

---

## üéì –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–°—Ç—Ä–∞—Ç–µ–≥–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Å—Ç—Ä–æ–≥–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã –≤—Ö–æ–¥–∞** –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∏ **–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã—Ö–æ–¥–æ–º** —á–µ—Ä–µ–∑ –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ TP –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç—Ä–µ–π–ª–∏–Ω–≥-—Å—Ç–æ–ø. –ú–æ–¥–µ–ª—å –æ–±—É—á–∞–µ—Ç—Å—è –Ω–∞ **42 –ø—Ä–∏–∑–Ω–∞–∫–∞—Ö** (V17_2) –∏–ª–∏ **62 –ø—Ä–∏–∑–Ω–∞–∫–∞—Ö** (V18 MTF), –≤–∫–ª—é—á–∞—è —Ä—ã–Ω–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏.

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π RR ‚â• 1.5 –¥–ª—è –∫–∞–∂–¥–æ–π —Å–¥–µ–ª–∫–∏
- –†–∞–∑–¥–µ–ª—å–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è LONG –∏ SHORT
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ LONG/SHORT –¥–ª—è —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
- –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ TP —Å —á–∞—Å—Ç–∏—á–Ω—ã–º –∑–∞–∫—Ä—ã—Ç–∏–µ–º
- **MTF –∞–Ω–∞–ª–∏–∑ (V18):** –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–µ–Ω–¥–æ–≤ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞—Ö –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –≤—Ö–æ–¥–æ–≤
