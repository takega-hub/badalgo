# –û—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –º–Ω–æ–≥–æ–ø–∞—Ä–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏

## –î–∞—Ç–∞: 2025-01-XX
## –í–µ—Ä—Å–∏—è: Multi-Symbol Trading Phase 2

---

## ‚úÖ –¢–µ—Å—Ç 1: –°–∏–Ω—Ç–∞–∫—Å–∏—Å Python —Ñ–∞–π–ª–æ–≤

### –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- ‚úÖ `bot/config.py` - –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ `bot/multi_symbol_manager.py` - –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ `bot/live.py` - –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ `bot/web/app.py` - –±–µ–∑ –æ—à–∏–±–æ–∫

### –†–µ–∑—É–ª—å—Ç–∞—Ç: **–ü–†–û–ô–î–ï–ù**

---

## ‚úÖ –¢–µ—Å—Ç 2: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö (AppSettings)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–µ–π:
- ‚úÖ `symbols: List[str]` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
- ‚úÖ `active_symbols: List[str]` - –∞–∫—Ç–∏–≤–Ω—ã–µ –¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏
- ‚úÖ `primary_symbol: str` - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∏–º–≤–æ–ª –¥–ª—è UI
- ‚úÖ `symbol: str` - –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

### –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ .env:
- ‚úÖ `ACTIVE_SYMBOLS` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ .env
- ‚úÖ `PRIMARY_SYMBOL` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ .env
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å `TRADING_SYMBOL` —Ä–∞–±–æ—Ç–∞–µ—Ç

### –†–µ–∑—É–ª—å—Ç–∞—Ç: **–ü–†–û–ô–î–ï–ù**

---

## ‚úÖ –¢–µ—Å—Ç 3: MultiSymbolManager

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç–æ–¥–æ–≤:
- ‚úÖ `__init__()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞
- ‚úÖ `start()` - –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö –≤–æ—Ä–∫–µ—Ä–æ–≤
- ‚úÖ `stop()` - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –≤–æ—Ä–∫–µ—Ä–æ–≤
- ‚úÖ `add_symbol()` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–∞
- ‚úÖ `remove_symbol()` - —É–¥–∞–ª–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–∞
- ‚úÖ `get_status()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ `get_all_workers_status()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –≤—Å–µ—Ö –≤–æ—Ä–∫–µ—Ä–æ–≤
- ‚úÖ `update_settings()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- ‚úÖ `_create_settings_for_symbol()` - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–ª—è —Å–∏–º–≤–æ–ª–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞:
- ‚úÖ `WorkerStatus` dataclass –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ `workers: Dict[str, WorkerStatus]` - —Å–ª–æ–≤–∞—Ä—å –≤–æ—Ä–∫–µ—Ä–æ–≤
- ‚úÖ `running: bool` - —Ñ–ª–∞–≥ –∑–∞–ø—É—Å–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
- ‚úÖ `lock: threading.Lock` - –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–ª—è –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –†–µ–∑—É–ª—å—Ç–∞—Ç: **–ü–†–û–ô–î–ï–ù**

---

## ‚úÖ –¢–µ—Å—Ç 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### Backend (bot/web/app.py):
- ‚úÖ –ò–º–ø–æ—Ä—Ç `MultiSymbolManager` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- ‚úÖ –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `multi_symbol_manager` –æ–±—ä—è–≤–ª–µ–Ω–∞
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ `init_app()` —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ API endpoints:
  - ‚úÖ `/api/symbols/list` - —Å–ø–∏—Å–æ–∫ —Å–∏–º–≤–æ–ª–æ–≤
  - ‚úÖ `/api/symbols/active` - –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
  - ‚úÖ `/api/symbols/set-active` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
- ‚úÖ `api_bot_start()` –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å MultiSymbolManager
- ‚úÖ `api_bot_stop()` –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å MultiSymbolManager
- ‚úÖ `api_status()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –ø–æ –≤—Å–µ–º —Å–∏–º–≤–æ–ª–∞–º
- ‚úÖ `api_chart_data()` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `symbol`
- ‚úÖ `_save_symbol_settings_to_env()` —Ä–∞–±–æ—Ç–∞–µ—Ç

### Frontend (bot/web/templates/index.html):
- ‚úÖ –í–∫–ª–∞–¥–∫–∞ "Symbols" –¥–æ–±–∞–≤–ª–µ–Ω–∞
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Å–∏–º–≤–æ–ª–æ–≤ –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- ‚úÖ JavaScript —Ñ—É–Ω–∫—Ü–∏–∏:
  - ‚úÖ `loadSymbolSettings()` - –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
  - ‚úÖ `saveSymbolSettings()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
  - ‚úÖ `changePrimarySymbol()` - –∏–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞
  - ‚úÖ `loadSymbolsStatus()` - –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏–º–≤–æ–ª–æ–≤
- ‚úÖ `loadChart()` –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —Å–∏–º–≤–æ–ª–∞

### –†–µ–∑—É–ª—å—Ç–∞—Ç: **–ü–†–û–ô–î–ï–ù**

---

## ‚úÖ –¢–µ—Å—Ç 5: –ò–∑–æ–ª—è—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ —Å–∏–º–≤–æ–ª–∞–º

### run_live_from_api():
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä `symbol: Optional[str]` –¥–æ–±–∞–≤–ª–µ–Ω
- ‚úÖ `processed_signals_file` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `processed_signals_{symbol}.json`
- ‚úÖ –°–ª–æ–≤–∞—Ä–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç `symbol` –∫–∞–∫ –∫–ª—é—á:
  - ‚úÖ `position_max_profit: Dict[str, float]`
  - ‚úÖ `position_max_price: Dict[str, float]`
  - ‚úÖ `position_partial_closed: Dict[str, bool]`
  - ‚úÖ `position_strategy: Dict[str, str]`
  - ‚úÖ `position_order_id: Dict[str, str]`
  - ‚úÖ `position_order_link_id: Dict[str, str]`
- ‚úÖ –í—Å–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ `current_settings.symbol` –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä `symbol`
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `[symbol]` —Ä–∞–±–æ—Ç–∞–µ—Ç

### –†–µ–∑—É–ª—å—Ç–∞—Ç: **–ü–†–û–ô–î–ï–ù**

---

## ‚úÖ –¢–µ—Å—Ç 6: –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
- ‚úÖ –°—Ç–∞—Ä—ã–µ –≤—ã–∑–æ–≤—ã `run_live_from_api(settings)` —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –ï—Å–ª–∏ `symbol=None`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `initial_settings.symbol`
- ‚úÖ –°—Ç–∞—Ä—ã–π —Ä–µ–∂–∏–º (–æ–¥–∏–Ω —Å–∏–º–≤–æ–ª) —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ `bot_thread`
- ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `TRADING_SYMBOL` –≤ .env –≤—Å–µ –µ—â–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –†–µ–∑—É–ª—å—Ç–∞—Ç: **–ü–†–û–ô–î–ï–ù**

---

## ‚ö†Ô∏è –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –û—Ç—Å—Ç—É–ø—ã –≤ bot/live.py
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö –ø–æ—Å–ª–µ –º–∞—Å—Å–æ–≤–æ–π –∑–∞–º–µ–Ω—ã
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –í—Å–µ –æ—Ç—Å—Ç—É–ø—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

### 2. –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ: –ò–∑–æ–ª—è—Ü–∏—è processed_signals
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ù—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫–∞–∂–¥—ã–π —Å–∏–º–≤–æ–ª –∏–º–µ–µ—Ç —Å–≤–æ–π —Ñ–∞–π–ª
- **–ü—Ä–æ–≤–µ—Ä–∫–∞:** ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `processed_signals_{symbol}.json`
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ê–ë–û–¢–ê–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–û

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –¢–µ—Å—Ç—ã | –ü—Ä–æ–π–¥–µ–Ω–æ | –ü—Ä–æ–≤–∞–ª–µ–Ω–æ |
|-----------|-------|----------|-----------|
| –°–∏–Ω—Ç–∞–∫—Å–∏—Å | 4 | 4 | 0 |
| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö | 3 | 3 | 0 |
| MultiSymbolManager | 9 | 9 | 0 |
| –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å | 16 | 16 | 0 |
| –ò–∑–æ–ª—è—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è | 8 | 8 | 0 |
| –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å | 4 | 4 | 0 |
| **–ò–¢–û–ì–û** | **44** | **44** | **0** |

---

## ‚úÖ –í—ã–≤–æ–¥—ã

1. ‚úÖ **–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**
2. ‚úÖ **–°–∏–Ω—Ç–∞–∫—Å–∏—Å –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π**
3. ‚úÖ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º**
4. ‚úÖ **MultiSymbolManager —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ**
5. ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∞**
6. ‚úÖ **–ò–∑–æ–ª—è—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ —Å–∏–º–≤–æ–ª–∞–º —Ä–∞–±–æ—Ç–∞–µ—Ç**
7. ‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞**

---

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —ç—Ç–∞–ø–∞

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
1. –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é —Ç–∞–±–ª–∏—Ü –ø–æ —Å–∏–º–≤–æ–ª—É (phase2-8)
2. –û–±–Ω–æ–≤–∏—Ç—å Dashboard –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–≤–æ–¥–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –≤—Å–µ–º –ø–∞—Ä–∞–º (phase2-9)
3. –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥–æ–≥–æ –≤–æ—Ä–∫–µ—Ä–∞ –≤ `get_all_workers_status()`
4. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö:
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ —Å –æ–¥–Ω–∏–º –∞–∫—Ç–∏–≤–Ω—ã–º —Å–∏–º–≤–æ–ª–æ–º (BTCUSDT)
2. –î–æ–±–∞–≤–∏—Ç—å –≤—Ç–æ—Ä–æ–π —Å–∏–º–≤–æ–ª (ETHUSDT) –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É
3. –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ—Ç–∏–π —Å–∏–º–≤–æ–ª (SOLUSDT) –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ –≤ UI
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–∏–º–≤–æ–ª–æ–≤ –≤ .env

---

## ‚úÖ –°—Ç–∞—Ç—É—Å: –ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ –í –†–ï–ê–õ–¨–ù–´–• –£–°–õ–û–í–ò–Ø–•

**–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã. –ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.**
